{"baseRefName":"main","body":"## What changed\n- Added new Anchor program `ddns_miner_score` for per-epoch miner stats, scoring, dominance penalty, and on-chain reward claiming (TOLL transfers from a vault).\n- Added devnet-ready script `solana/scripts/miner_score.ts` (init-config/report/finalize/set-reward/claim/penalize) with env/Anchor.toml program id discovery (no hardcoded IDs).\n- Added localnet test `solana/tests/ddns_miner_score.ts` covering: report stats -> finalize epoch -> set rewards -> penalize -> claim -> replay rejection.\n- Added MVP bootstrap service `services/miner-witness` endpoint `POST /v1/report-epoch-stats` to submit stats on-chain (allowlisted submitter model).\n- Docs: `docs/MINER_SCORING.md` + short `docs/MVP.md` / `docs/END_STATE.md`, and linked from root README + docs index.\n- Set `solana/Anchor.toml` provider cluster to `localnet` to prevent accidental devnet deploys during `anchor test`.\n\n## Why\nWe need miner incentives that reward correctness/availability/diversity/timeliness while discouraging centralization. MVP keeps verification off-chain and uses allowlisted submitters; end-state moves to proof-backed submissions and slashing.\n\n## How to verify (localnet)\n```bash\ncd solana\nanchor build\nanchor test\n```\n\n## MVP trust model\n- On-chain does not verify receipts/aggregates in MVP.\n- `report_miner_epoch_stats`, `finalize_epoch`, `set_miner_reward`, and `penalize_miner` are gated by `allowlisted_submitters`.\n- Miner participation is gated by `allowlisted_miners` (MVP only; end-state removes).\n\n## Notes on anti-centralization\n- On-chain enforces per-miner epoch reward cap + dominance penalty in raw score.\n- Quadratic reward curve is computed off-chain in MVP and committed on-chain via `set_miner_reward`.","commits":[{"authoredDate":"2026-02-09T11:01:02Z","authors":[{"email":"144741118+cwalinapj@users.noreply.github.com","id":"U_kgDOCKCS_g","login":"cwalinapj","name":"Paul Cwalina"}],"committedDate":"2026-02-09T11:01:02Z","messageBody":"","messageHeadline":"ddns_miner_score: epoch scoring + anti-centralization rewards (MVP)","oid":"b4177e6c2f4f33c69b0d1b926a209755707e1728"}],"files":[{"path":"README.md","additions":1,"deletions":0},{"path":"docs/END_STATE.md","additions":32,"deletions":0},{"path":"docs/MINER_SCORING.md","additions":123,"deletions":0},{"path":"docs/MVP.md","additions":28,"deletions":0},{"path":"docs/README.md","additions":3,"deletions":0},{"path":"services/miner-witness/README.md","additions":49,"deletions":0},{"path":"services/miner-witness/package.json","additions":20,"deletions":0},{"path":"services/miner-witness/src/index.ts","additions":160,"deletions":0},{"path":"services/miner-witness/tsconfig.json","additions":11,"deletions":0},{"path":"solana/Anchor.toml","additions":4,"deletions":2},{"path":"solana/Cargo.lock","additions":8,"deletions":0},{"path":"solana/Cargo.toml","additions":1,"deletions":0},{"path":"solana/package.json","additions":2,"deletions":1},{"path":"solana/programs/ddns_miner_score/Cargo.toml","additions":22,"deletions":0},{"path":"solana/programs/ddns_miner_score/src/lib.rs","additions":740,"deletions":0},{"path":"solana/scripts/miner_score.ts","additions":347,"deletions":0},{"path":"solana/tests/ddns_miner_score.ts","additions":288,"deletions":0}],"headRefName":"codex/prX-miner-scoring","labels":[],"number":51,"statusCheckRollup":[{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:50Z","conclusion":"FAILURE","detailsUrl":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/actions/runs/21822448028/job/62958936946","name":"Docs formatting (markdownlint)","startedAt":"2026-02-09T11:01:38Z","status":"COMPLETED","workflowName":"ci"},{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:46Z","conclusion":"FAILURE","detailsUrl":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/actions/runs/21822448028/job/62958936978","name":"Raspi TS package builds","startedAt":"2026-02-09T11:01:38Z","status":"COMPLETED","workflowName":"ci"},{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:44Z","conclusion":"FAILURE","detailsUrl":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/actions/runs/21822448028/job/62958937042","name":"Compat MVP validation","startedAt":"2026-02-09T11:01:38Z","status":"COMPLETED","workflowName":"ci"},{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:42Z","conclusion":"FAILURE","detailsUrl":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/actions/runs/21822448028/job/62958936942","name":"MVP resolver checks","startedAt":"2026-02-09T11:01:37Z","status":"COMPLETED","workflowName":"ci"},{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:43Z","conclusion":"FAILURE","detailsUrl":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/actions/runs/21822448028/job/62958936992","name":"MVP root tests","startedAt":"2026-02-09T11:01:37Z","status":"COMPLETED","workflowName":"ci"},{"__typename":"CheckRun","completedAt":"2026-02-09T11:01:36Z","conclusion":"SUCCESS","detailsUrl":"https://dashboard.gitguardian.com","name":"GitGuardian Security Checks","startedAt":"2026-02-09T11:01:35Z","status":"COMPLETED","workflowName":""}],"title":"ddns_miner_score: miner scoring + anti-centralization rewards (MVP)","url":"https://github.com/cwalinapj/DECENTRALIZED-DNS-/pull/51"}
