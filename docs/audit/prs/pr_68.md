# PR #68 â€” gateway: harden recursive quorum + add cf worker miner starter

- URL: https://github.com/cwalinapj/DECENTRALIZED-DNS-/pull/68
- Branch: `codex/quorum-harden-cf-worker` -> `main`
- Labels: (none)
- CI rollup: failing-or-pending

## What changed
- `gateway/README.md`
- `gateway/src/adapters/recursive.ts`
- `gateway/src/server.ts`
- `gateway/tests/recursive_quorum.test.ts`
- `gateway/tests/resolve.test.ts`
- `services/cf-worker-miner/README.md`
- `services/cf-worker-miner/package-lock.json`
- `services/cf-worker-miner/package.json`
- `services/cf-worker-miner/src/index.ts`
- `services/cf-worker-miner/wrangler.toml`

## Why it exists (inferred)
- gateway: harden recursive quorum + add cf worker miner starter
- PR body excerpt:
```text
## What changed
- Hardened recursive DoH adapter in `gateway` with multi-upstream quorum (Cloudflare + Google by default).
- Added canonical RRset normalization + hashing, CNAME-following, overlap-based confidence, and conservative TTL caps by confidence.
- Added NXDOMAIN TTL cap (30s), qtype-aware cache key (`name:qtype`), stale-if-error + prefetch behavior retained.
- Updated `/v1/resolve` response to include confidence/upstream audit/cache metadata.
- Added `services/cf-worker-miner` MVP Worker starter for edge resolve/quorum output.

## Verification
- `npm -C gateway i`
- `npm -C gateway test`
```

## Risk flags
- Touches solana: no
- Touches gateway: yes
- Touches miner-witness: no
- Docs-only: no
- Risk level: med

## How to verify
- PR body contains verification/devnet markers.
